<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- SEO -->
    <title>fastlane Best Practices and Tips with Josh Holtz</title>
    <meta name="description" content="fastlane Best Practices and Tips with Josh Holtz">

    <!-- URL CANONICAL -->
    <!-- <link rel="canonical" href="http://your-url.com/permalink"> -->

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,700,700i%7CMaitree:200,300,400,600,700&amp;subset=latin-ext" rel="stylesheet">

    <!-- CSS Base -->
    <link rel="stylesheet" type='text/css' media='all' href="./static/css/webslides.css">
    <link rel="stylesheet" type='text/css' media='all' href="./static/css/prism.css">

    <!-- Optional - CSS SVG Icons (Font Awesome) -->
    <link rel="stylesheet" type="text/css" media="all" href="./static/css/svg-icons.css">

    <!-- SOCIAL CARDS (ADD YOUR INFO) -->

    <!-- FACEBOOK -->
    <meta property="og:url" content="www.joshholtz.com/fastlane-best-practices"> <!-- EDIT -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="fastlane Best Practices and Tips with Josh Holtz"> <!-- EDIT -->
    <meta property="og:description" content="fastlane Best Practices and Tips with Josh Holtz."> <!-- EDIT -->
    <meta property="og:updated_time" content="2019-04-30T17:32:14"> <!-- EDIT -->
    <meta property="og:image" content="./static/images/share-webslides.jpg" > <!-- EDIT -->

    <!-- TWITTER -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@webslides"> <!-- EDIT -->
    <meta name="twitter:creator" content="@joshdholtz"> <!-- EDIT -->
    <meta name="twitter:title" content="fastlane Best Practices and Tips"> <!-- EDIT -->
    <meta name="twitter:description" content="fastlane Best Practices and Tips with Josh Holtz"> <!-- EDIT -->
    <meta name="twitter:image" content="./static/images/share-webslides.jpg"> <!-- EDIT -->

    <!-- FAVICONS -->
    <link rel="shortcut icon" sizes="16x16" href="./static/images/favicons/favicon.png">
    <link rel="shortcut icon" sizes="32x32" href="./static/images/favicons/favicon-32.png">
    <link rel="apple-touch-icon icon" sizes="76x76" href="./static/images/favicons/favicon-76.png">
    <link rel="apple-touch-icon icon" sizes="120x120" href="./static/images/favicons/favicon-120.png">
    <link rel="apple-touch-icon icon" sizes="152x152" href="./static/images/favicons/favicon-152.png">
    <link rel="apple-touch-icon icon" sizes="180x180" href="./static/images/favicons/favicon-180.png">
    <link rel="apple-touch-icon icon" sizes="192x192" href="./static/images/favicons/favicon-192.png">

    <!-- Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#333333">
  </head>
  <body>
    <main role="main">
      <article id="webslides">

        <!-- Quick Guide
          - Each parent <section> in the <article id="webslides"> element is an individual slide.
          - Vertical sliding = <article id="webslides" class="vertical">
          - <div class="wrap"> = container 90% / <div class="wrap size-50"> = 45%;
        -->

        <section class="bg-apple aligncenter">
          <!--.wrap = container (width: 90%) -->
          <div class="wrap">
            <h1><img class="whitelogo" src="./static/images/fastlane_text.png" alt="fastlane Logo"></h1>
            <h1>Best Practices and Tips</h1>
            <h4>with Josh Holtz</h4>
          </div>
          <!-- .end .wrap -->
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>Who is Josh Holtz?</h1>
            <ul>
              <li>
                <h3>Core contributor of <a href="http://fastlane.com"><em>fastlane</em></a> since early 2015</h3>
                <ul>
                  <li>
                    <h4><strong>Lead maintainer</strong> of <em>fastlane</em> since March 2018</h4>
                  </li>
                  <li>
                    <h4>Add features, manage issues, merge PRs, make releases</h4>
                  </li>
                </ul>
              </li>
              <li>
                  <h3>Owner of <a href="http://rokkincat.com"><em>RokkinCat</em></a> since 2011</h3>
                  <ul>
                    <li>
                      <h4>Software consulting agency focused on new product development</h4>
                    </li>
                    <li>
                      <h4>Personally focused on mobile development and CI/CD</h4>
                    </li>
                  </ul>
              </li>
              <li>
                <h3>Locations</h3>
                <ul>
                  <li>
                    <h4>Grew up and lived in <strong>Milwaukee</strong> until 2016</h4>
                  </li>
                  <li>
                    <h4>Currently living in <strong>Chicago <em>(suburbs)</em></strong></h4>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <div class="content-left">
              <h1>Another thing about me...</h1>
              <h4>I <em>do</em> have a stutter ðŸ˜£</h4>
              <h4>I have a fear of public speaking ðŸ‘»</h4>
            </div>
            <!-- end .content-left -->
            <div class="content-left">
              <img src="./fear-of-public-speaking.jpg"/>
            </div>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>Return value of "Best Practices and Tips"?</h1>
            <ul>
              <li>
                <h3>Cleaner and more maintable code</h3>
              </li>
              <li>
                <h3>Flexable and configurable </h3>
              </li>
              <li>
                <h3>Easier to debug</h3>
              </li>
              <li>
                <h3>Awareness of lesser known features</h3>
              </li>
            </ul>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h2>What will we cover?</h2>
            <ul class="flexblock features">
              <li>
                <div>
                  <h2>
                    <span>1.</span>
                    Install with <code>bundler</code>
                  </h2>
                  Lock those gem versions
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span>2.</span>
                    Platforms
                  </h2>
                  Namespace platform specific lanes
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span>3.</span>
                    Lane Options and <code>UI</code>
                  </h2>
                  Open up user input for lanes
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span>4.</span>
                    Lane Description
                  </h2>
                  Don't forget about <code>desc</code>
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span>5.</span>
                    Environment Variables
                  </h2>
                  Minimize harcoding
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span>6.</span>
                    <em>fastlane</em> Documentation
                  </h2>
                  It's there ðŸ™ƒ
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span>7.</span>
                    Separate Apple ID
                  </h2>
                  Pretend <em>fastlane</em> is a person
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span>8.</span>
                    Use <code>match</code> or <code>sigh</code>
                  </h2>
                  This makes code signing with <code>gym</code> easier
                </div>
              </li>
              <li>
                <div>
                  <h2>
                    <span>9.</span>
                    Keep Lanes Simple
                  </h2>
                  Use lane composition, actions, and plugins
                </div>
              </li>
            </ul>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>1. Install with <code>bundler</code></h1>
            <ul class="slide-list">

            </ul>
            <ul class="slide-list">
              <li><h4>Keep <em>fastlane</em> and its dependencies consistant</h4></li>
              <li>
                <h4>Good for when <em>fastlane</em> shells out commands</h4>
                <ul>
                  <li><h5>
                    Ex: <em>fastlane</em> will execute <code>bundle exec pod install</code> which will run the same CocoaPods gem version installed in the <code>Gemfile</code>
                  </h5></li>
                </ul>
              </li>
              <li>
                <h4>Needed if third-party plugins are used</h4>
                <ul>
                  <li><h5>
                    <em>fastlane</em> will load a <code>Pluginfile</code> from the <code>Gemfile</code> when installing plugins
                  </h5></li>
                  <li><h5>This will be covered in a later slide</h5></li>
                </ul>
              </li>
            </ul>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>1. Install with <code>bundler</code> cont'd</h1>
            <h4>Create Gemfile</h4>
            <pre class="language-bash"><code data-pygments="ignore">$ bundle init</code></pre>
            <h4>Edit Gemfile</h4>
            <pre class="language-ruby"><code data-pygments="ignore">source "https://rubygems.org"

gem "fastlane"</code></pre>
            <h4>Install gems</h4>
            <pre class="language-bash"><code data-pygments="ignore">$ bundle install</code></pre>
            <h4>Execute <em>fastlane</em></i></h4>
            <pre class="language-bash"><code data-pygments="ignore">$ bundle exec fastlane <lane></code></pre>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>1. Install with <code>bundler</code> cont'd</h1>
            <h4>Generated Gemfile.lock</h4>
            <pre class="language-ruby">GEM
  remote: https://rubygems.org/
  specs:
    CFPropertyList (3.0.0)
    activesupport (4.2.11.1)
      i18n (~> 0.7)
      minitest (~> 5.1)
      thread_safe (~> 0.3, >= 0.3.4)
      tzinfo (~> 1.1)
    addressable (2.6.0)
      public_suffix (>= 2.0.2, < 4.0)
    atomos (0.1.3)
    babosa (1.0.2)
    claide (1.0.2)
    cocoapods (1.6.1)
      activesupport (>= 4.0.2, < 5)
      claide (>= 1.0.2, < 2.0)
      cocoapods-core (= 1.6.1)
      cocoapods-deintegrate (>= 1.0.2, < 2.0)
      cocoapods-downloader (>= 1.2.2, < 2.0)
      cocoapods-plugins (>= 1.0.0, < 2.0)
      cocoapods-search (>= 1.0.0, < 2.0)
      cocoapods-stats (>= 1.0.0, < 2.0)
      cocoapods-trunk (>= 1.3.1, < 2.0)
      cocoapods-try (>= 1.1.0, < 2.0)
      colored2 (~> 3.1)
      escape (~> 0.0.4)
      fourflusher (>= 2.2.0, < 3.0)
      gh_inspector (~> 1.0)
      molinillo (~> 0.6.6)
      nap (~> 1.0)
      ruby-macho (~> 1.4)
      xcodeproj (>= 1.8.1, < 2.0)
    cocoapods-core (1.6.1)
      activesupport (>= 4.0.2, < 6)
      fuzzy_match (~> 2.0.4)
      nap (~> 1.0)
    cocoapods-deintegrate (1.0.3)
    cocoapods-downloader (1.2.2)
    cocoapods-plugins (1.0.0)
      nap
    cocoapods-search (1.0.0)
    cocoapods-stats (1.1.0)
    cocoapods-trunk (1.3.1)
      nap (>= 0.8, < 2.0)
      netrc (~> 0.11)
    cocoapods-try (1.1.0)
    colored (1.2)
    colored2 (3.1.2)
    commander-fastlane (4.4.6)
      highline (~> 1.7.2)
    concurrent-ruby (1.1.5)
    declarative (0.0.10)
    declarative-option (0.1.0)
    digest-crc (0.4.1)
    domain_name (0.5.20180417)
      unf (>= 0.0.5, < 1.0.0)
    dotenv (2.7.2)
    emoji_regex (1.0.1)
    escape (0.0.4)
    excon (0.62.0)
    faraday (0.15.4)
      multipart-post (>= 1.2, < 3)
    faraday-cookie_jar (0.0.6)
      faraday (>= 0.7.4)
      http-cookie (~> 1.0.0)
    faraday_middleware (0.13.1)
      faraday (>= 0.7.4, < 1.0)
    fastimage (2.1.5)
    fastlane (2.119.0)
      CFPropertyList (>= 2.3, < 4.0.0)
      addressable (>= 2.3, < 3.0.0)
      babosa (>= 1.0.2, < 2.0.0)
      bundler (>= 1.12.0, < 3.0.0)
      colored
      commander-fastlane (>= 4.4.6, < 5.0.0)
      dotenv (>= 2.1.1, < 3.0.0)
      emoji_regex (>= 0.1, < 2.0)
      excon (>= 0.45.0, < 1.0.0)
      faraday (~> 0.9)
      faraday-cookie_jar (~> 0.0.6)
      faraday_middleware (~> 0.9)
      fastimage (>= 2.1.0, < 3.0.0)
      gh_inspector (>= 1.1.2, < 2.0.0)
      google-api-client (>= 0.21.2, < 0.24.0)
      google-cloud-storage (>= 1.15.0, < 2.0.0)
      highline (>= 1.7.2, < 2.0.0)
      json (< 3.0.0)
      mini_magick (~> 4.5.1)
      multi_json
      multi_xml (~> 0.5)
      multipart-post (~> 2.0.0)
      plist (>= 3.1.0, < 4.0.0)
      public_suffix (~> 2.0.0)
      rubyzip (>= 1.2.2, < 2.0.0)
      security (= 0.1.3)
      simctl (~> 1.6.3)
      slack-notifier (>= 2.0.0, < 3.0.0)
      terminal-notifier (>= 2.0.0, < 3.0.0)
      terminal-table (>= 1.4.5, < 2.0.0)
      tty-screen (>= 0.6.3, < 1.0.0)
      tty-spinner (>= 0.8.0, < 1.0.0)
      word_wrap (~> 1.0.0)
      xcodeproj (>= 1.8.1, < 2.0.0)
      xcpretty (~> 0.3.0)
      xcpretty-travis-formatter (>= 0.0.3)
    fastlane-plugin-android_keystore (0.1.0)
    fastlane-plugin-ionic (0.1.0)
    fastlane-plugin-update_provisioning_profile_specifier (1.3.1)
      xcodeproj (>= 1.3.3)
    fastlane-plugin-upgrade_super_old_xcode_project (0.0.2)
    fourflusher (2.2.0)
    fuzzy_match (2.0.4)
    gh_inspector (1.1.3)
    google-api-client (0.23.9)
      addressable (~> 2.5, >= 2.5.1)
      googleauth (>= 0.5, < 0.7.0)
      httpclient (>= 2.8.1, < 3.0)
      mime-types (~> 3.0)
      representable (~> 3.0)
      retriable (>= 2.0, < 4.0)
      signet (~> 0.9)
    google-cloud-core (1.3.0)
      google-cloud-env (~> 1.0)
    google-cloud-env (1.0.5)
      faraday (~> 0.11)
    google-cloud-storage (1.16.0)
      digest-crc (~> 0.4)
      google-api-client (~> 0.23)
      google-cloud-core (~> 1.2)
      googleauth (>= 0.6.2, < 0.10.0)
    googleauth (0.6.7)
      faraday (~> 0.12)
      jwt (>= 1.4, < 3.0)
      memoist (~> 0.16)
      multi_json (~> 1.11)
      os (>= 0.9, < 2.0)
      signet (~> 0.7)
    highline (1.7.10)
    http-cookie (1.0.3)
      domain_name (~> 0.5)
    httpclient (2.8.3)
    i18n (0.9.5)
      concurrent-ruby (~> 1.0)
    json (2.2.0)
    jwt (2.1.0)
    memoist (0.16.0)
    mime-types (3.2.2)
      mime-types-data (~> 3.2015)
    mime-types-data (3.2018.0812)
    mini_magick (4.5.1)
    minitest (5.11.3)
    molinillo (0.6.6)
    multi_json (1.13.1)
    multi_xml (0.6.0)
    multipart-post (2.0.0)
    nanaimo (0.2.6)
    nap (1.1.0)
    naturally (2.2.0)
    netrc (0.11.0)
    os (1.0.0)
    plist (3.5.0)
    public_suffix (2.0.5)
    representable (3.0.4)
      declarative (< 0.1.0)
      declarative-option (< 0.2.0)
      uber (< 0.2.0)
    retriable (3.1.2)
    rouge (2.0.7)
    ruby-macho (1.4.0)
    rubyzip (1.2.2)
    security (0.1.3)
    signet (0.11.0)
      addressable (~> 2.3)
      faraday (~> 0.9)
      jwt (>= 1.5, < 3.0)
      multi_json (~> 1.10)
    simctl (1.6.5)
      CFPropertyList
      naturally
    slack-notifier (2.3.2)
    terminal-notifier (2.0.0)
    terminal-table (1.8.0)
      unicode-display_width (~> 1.1, >= 1.1.1)
    thread_safe (0.3.6)
    tty-cursor (0.6.1)
    tty-screen (0.6.5)
    tty-spinner (0.9.0)
      tty-cursor (~> 0.6.0)
    tzinfo (1.2.5)
      thread_safe (~> 0.1)
    uber (0.1.0)
    unf (0.1.4)
      unf_ext
    unf_ext (0.0.7.5)
    unicode-display_width (1.5.0)
    word_wrap (1.0.0)
    xcodeproj (1.8.1)
      CFPropertyList (>= 2.3.3, < 4.0)
      atomos (~> 0.1.3)
      claide (>= 1.0.2, < 2.0)
      colored2 (~> 3.1)
      nanaimo (~> 0.2.6)
    xcpretty (0.3.0)
      rouge (~> 2.0.7)
    xcpretty-travis-formatter (1.0.0)
      xcpretty (~> 0.2, >= 0.0.7)

PLATFORMS
  ruby

DEPENDENCIES
  cocoapods
  fastlane
  fastlane-plugin-android_keystore
  fastlane-plugin-ionic
  fastlane-plugin-update_provisioning_profile_specifier
  fastlane-plugin-upgrade_super_old_xcode_project

BUNDLED WITH
    1.17.3              
            </pre>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>1. Install with <code>bundler</code> cont'd</h1>
            <h4>Example Gemfile</h4>
            <pre class="language-ruby"><code data-pygments="ignore">source "https://rubygems.org"

gem "fastlane"
gem "cocoapods"

# Added by fastlane when installing plugins
plugins_path = File.join(File.dirname(__FILE__), 'fastlane', 'Pluginfile')
eval_gemfile(plugins_path) if File.exist?(plugins_path)</code></pre>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>2. Platforms</h1>
            <ul class="slide-list">
              <li>Group/namespace lanes by platform</li>
              <li>Used by running <code>fastlane &lt;platform&gt; &lt;lane&gt;</code></li>
            </ul>
            <pre class="language-ruby"><code data-pygments="ignore">lane :bump_version do
  # This doesn't belong to a platform
end

platform :ios do
    lane :build do
        # Do ios build stuff
    end
end

platform :mac do
    lane :build do
        # Do mac build stuff
    end
end

platform :android do
    lane :build do
        # Do android build stuff
    end
end</code></pre>
          </div>
        </section>

        <!-- 3. Lane Options -->
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>3. Lane Options and <code>UI</code></h1>
            <ul class="slide-list">
              <li>Pass options to a lane: <code>fastlane &lt;lane&gt; opt1:val1 opt2:val2</code></li>
            </ul>
            <pre class="language-ruby"><code data-pygments="ignore"># fastlane bump version:"1.0" build_number:"123"
lane :bump do |options|
  version = options[:version]
  build_number = options[:build_number]

  # Update plist with new version and build number
  update_info_plist(
    xcodeproj: 'Test.xcodeproj',
    plist_path: 'Test/Info.plist',
    block: proc do |plist|
      plist["CFBundleShortVersionString"] = version
      plist["CFBundleVersion"] = build_number
    end
  )
end</code></pre>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>3. Lane Options and <code>UI</code> cont'd</h1>
            <ul class="slide-list">
              <li>
                Get user input with <code>UI</code> class
                <ul>
                  <li>
                    <a href="https://docs.fastlane.tools/advanced/#interacting-with-the-user" target="_blank">https://docs.fastlane.tools/advanced/#interacting-with-the-user</a>
                  </li>
                </ul>
              </li>
            </ul>
            <pre class="language-ruby"><code data-pygments="ignore">lane :bump do |options|
  # Prompt version number
  version = nil
  loop do
    version = options[:version] || UI.input("Version?")
    break if version && !version.empty?
  end 

  # Prompt build number
  build_number = options[:build_number] || UI.input("Build number (defaults to current timestamp)?")
  build_number = Time.now.to_i if build_number.nil? || build_number.empty?

  # Update plist with new version and build number
  update_info_plist(
    xcodeproj: 'Test.xcodeproj',
    plist_path: 'Test/Info.plist',
    block: proc do |plist|
      plist["CFBundleShortVersionString"] = version
      plist["CFBundleVersion"] = build_number
    end
  )
end</code></pre>
          </div>
        </section>


        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>4. Lane Description</h1>
            <pre class="language-ruby"><code data-pygments="ignore">desc "Bumps the version and build number on the project"
desc "The lane to run by developers"
desc "#### Example:"
desc "```\nfastlane ios bump version:2.0.1 build_number:23\n```"
desc "#### Options"
desc " * **`version`**: The version to set in the Info.plist (`CFBundleShortVersionString`)"
desc " * **`build_number`**: The build number to set in the Info.plist (`CFBundleVersion`)"
desc ""
lane :bump do
    # See previous slide for logic
end</code></pre>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>4. Lane Description cont'd</h1>
            <img style="height: 50%;" src="./static/images/example_markdown.png"/>
          </div>
        </section>

        <!-- 5. Environment Variables -->
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>5. Environment Variables</h1>
            
            <h4>Put non-secret values in <code>.env</code></h4>
            <pre class="language-ruby"><code data-pygments="ignore"># fastlane/.env
GYM_PROJECT=Example.xcodeproj
GYM_SCHEME=development</code></pre>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>5. Environment Variables cont'd</h1>
            
            <h4>Load secret values from <code>.env.secret</code></h4>
            <ul>
              <li>Add <code>.env.secret</code> to <code>.gitignore</code> so not to commit secret values</li>
              <li>Call <code>Dotenv.load ".env.secret"</code> at top of <code>Fastfile</code></li>
            </ul>
            <pre class="language-ruby"><code data-pygments="ignore"># fastlane/.env.secret
FASTLANE_PASSWORD=shhhhhh</code></pre>
            <pre class="language-ruby"><code data-pygments="ignore">fastlane_require "dotenv"
Dotenv.load ".env.secret"</code></pre>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>5. Environment Variables cont'd</h1>

            <h4>Put <code>--env</code> specific values in <code>.env.&lt;environment&gt;</code></h4>
            <ul>
              These get loaded when <code>fastlane &lt;lane&gt; --env &lt;environment&gt;</code> gets run
            </ul>
            <pre class="language-ruby"><code data-pygments="ignore"># fastlane/.env.development
GYM_SCHEME=development</code></pre>
            <pre class="language-ruby"><code data-pygments="ignore"># fastlane/.env.staging
GYM_SCHEME=staging</code></pre>
            <pre class="language-ruby"><code data-pygments="ignore"># fastlane/.env.production
GYM_SCHEME=production</code></pre>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>5. Environment Variables cont'd</h1>
            <pre class="language-ruby"><code data-pygments="ignore">fastlane_require "dotenv"
Dotenv.load(".env.secret")

lane :test do
  UI.message("GYM_PROJECT: #{ENV['GYM_PROJECT']}") # Prints "Example.xcodeproj"
  UI.message("GYM_SCHEME: #{ENV['GYM_SCHEME']}") # Prints "development", "staging", or "production"
  UI.message("FASTLANE_PASSWORD: #{ENV['FASTLANE_PASSWORD']}") # Prints "shhhhhh"
end

</code></pre>
          </div>
        </section>

        <!-- 6. fastlane documentation -->
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>6. <em>fastlane</em> Documentation</h1>
            <ul class="slide-list">
              <li>
                  <a href="https://docs.fastlane.tools" target="_blank">https://docs.fastlane.tools</a>
              </li>
              <li>
                Advanced
                <ul>
                  <li><a href="https://docs.fastlane.tools/advanced/" target="_blank">https://docs.fastlane.tools/advanced/</a></li>
                </ul>
              </li>
              <li>
                  Actions
                  <ul>
                    <li><a href="https://docs.fastlane.tools/actions/" target="_blank">https://docs.fastlane.tools/actions/</a></li>
                  </ul>
                </li>
              <li>
                Plugins
                <ul>
                  <li><a href="https://docs.fastlane.tools/plugins/available-plugins/" target="_blank">https://docs.fastlane.tools/plugins/available-plugins/</a></li>
                </ul>
              </li>
              <li>
                  Continuous Integration
                  <ul>
                    <li><a href="https://docs.fastlane.tools/best-practices/continuous-integration/" target="_blank">https://docs.fastlane.tools/best-practices/continuous-integration/</a></li>
                  </ul>
                </li>
            </ul>
          </div>
        </section>

        <!-- 7. Separate Apple ID -->
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>7. Separate Apple ID</h1>
            <h3>
              Instead of <code>your.name@example.com</code>... Use <code>fastlane@example.com</code>
            </h3>
            <ul>
              <li>Get around force two-factor auth on "Account Holders" accounts</li>
              <li>Prevents from having to use a personal email/password</li>
              <li>Especially if two-step or two-factor auth is enabled</li>
              <li>Can revoke access at anytime (great for CI)</li>
            </ul>
          </div>
        </section>

        <!-- 8. Match or sigh -->
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>8. Use <code>match</code> or <code>sigh</code> before <code>gym</code></h1>
            <ul>
              <li><em>Xcode 9 (and up)</em> requires that an <code>-exportOptionsPlist</code> be passed to the <code>xcodebuild</code> command that <em>gym</em> generates</li>
              <li>This <code>exportOptionsPlist</code> is required to have a key for <code>provisioningProfiles</code></li>
              <li>This can be manually passed into <em>gym</em> through <code>export_options</code> like the following:</li>

              <pre class="language-ruby"><code data-pygments="ignore">lane :build do
    gym(
        export_options: {
          "provisioningProfiles": {
              "com.joshholtz.FastlaneDemo": "match AppStore com.joshholtz.FastlaneDemo",
          },
          "method": "app-store",
          "signingStyle": "manual"
        }
    )
end</code></pre>
            </ul>
            <h4>But this can be easier with by calling <code>match</code> or <code>sigh</code> ðŸš€</h4>            
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>8. Use <code>match</code> or <code>sigh</code> before <code>gym</code> cont'd</h1>
            <pre class="language-ruby"><code data-pygments="ignore">lane :build do
    sigh(
      app_identifier: "com.joshholtz.FastlaneDemo",
      development: false
    )
    gym()
end</code></pre>
            <h4>By calling <code>sigh</code> (or <code>match</code>), <em>fastlane</em> will...</h4>
            <ul>
              <li>Automatically create <code>exportOptionsPlist</code></li>
              <li>Automatically set <code>provisioningProfiles</code> key with profiles that were created or downloaded</li>
              <li>Automatically set <code>method</code> depending on what was passed into <em>sigh</em> or <em>match</em></li>
            </ul>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>9. Keep Lanes Simple - Lane Composition</h1>
            <h4>Call another <code>lane</code> or <code>private_lane</code> from a <code>lane</code></h4>
            <h5>Our previous <code>:bump</code> lane can be cleaned up like:</h5>
            <pre class="language-ruby"><code data-pygments="ignore">lane :bump do |options|
  # Update plist with new version and build number
  update_info_plist(
    xcodeproj: 'Test.xcodeproj',
    plist_path: 'Test/Info.plist',
    block: proc do |plist|
      plist["CFBundleShortVersionString"] = get_version(options)
      plist["CFBundleVersion"] = get_build_number(options)
    end
  )
end

private_lane :get_version do |options|
  version = nil
  loop do
    version = options[:version] || UI.input("Version?")
    break if version && !version.empty?
  end
  version
end

private_lane :get_build_number do |options|
  build_number = options[:build_number] || UI.input("Build number (defaults to current timestamp)?")
  build_number = Time.now.to_i if build_number.nil? || build_number.empty?
  build_number
end</code></pre>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>9. Keep Lanes Simple - Custom Action</h1>
            <h4>Sometimes lanes need to have some custom Ruby implementation</h4>
            <h5>In this contrived example, we are going to set our app name to a randomly selected Star Wars character</h5>
            <pre class="language-ruby"><code data-pygments="ignore">lane :star_wars do
  fastlane_require "rest-client"
  resp = RestClient.get "https://swapi.co/api/people/"
  json = JSON.parse(resp.body)
  people = json["results"]
  random_person = people.sample
  
  update_info_plist(
    xcodeproj: 'Test.xcodeproj',
    plist_path: 'Test/Info.plist',
    block: proc do |plist|
      plist["CFBundleDisplayName"] = random_person['name']
    end
  )

  sigh()
  gym()
end</code></pre>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>9. Keep Lanes Simple - Custom Action cont'd</h1>
            <ul>
              <li>
                Now replace custom logic in the lane with new action name
              </li>
              <li>
                The new action code is easier to maintain and Test
              </li>
              <li>
                The new acttion has documentation that other developers can reference
              </li>
              <li>
                The action can easily be reused
              </li>
              <li>
                The <em>faslane</em> output now shows when new action is being called
              </li>
            </ul>
            <pre class="language-ruby"><code data-pygments="ignore">lane :star_wars do
  random_person = star_wars_api(route: "/people/").sample
  
  update_info_plist(
    xcodeproj: 'Test.xcodeproj',
    plist_path: 'Test/Info.plist',
    block: proc do |plist|
      plist["CFBundleDisplayName"] = random_person['name']
    end
  )

  sigh()
  gym()
end</code></pre>
          </div>
        </section>
        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>9. Keep Lanes Simple - Custom Action cont'd</h1>
            <ul>
              <li>
                Create new action with <code>fastlane new_action</code>
              </li>
              <li>
                Give your action a name
              </li>
              <li>
                Open up your newly created action in <code>./fastlane/actions</code> directory
              </li>
              <li>
                Fill out the templated methods and put your logic in the <code>run</code> method
              </li>
            </ul>
            <pre class="language-ruby"><code data-pygments="ignore">module Fastlane
  module Actions
    module SharedValues
      STAR_WARS_API_LAST_RESPONSE = :STAR_WARS_API_LAST_RESPONSE
      STAR_WARS_API_COUNT = :STAR_WARS_API_COUNT
      STAR_WARS_API_NEXT = :STAR_WARS_API_NEXT
      STAR_WARS_API_PREVIOUS = :STAR_WARS_API_PREVIOUS
    end

    class StarWarsApiAction < Action
      def self.run(params)
        fastlane_require "rest-client"
        resp = RestClient.get "https://swapi.co/api#{params[:route]}"
        json = JSON.parse(resp.body)

        Actions.lane_context[SharedValues::STAR_WARS_API_LAST_RESPONSE] = json
        Actions.lane_context[SharedValues::STAR_WARS_API_COUNT] = json["count"]
        Actions.lane_context[SharedValues::STAR_WARS_API_NEXT] = json["next"]
        Actions.lane_context[SharedValues::STAR_WARS_API_PREVIOUS] = json["previous"]

        json["results"]
      end

      #####################################################
      # @!group Documentation
      #####################################################

      def self.description
        "Call Star Wars API"
      end

      def self.details
        "Call Star Wars API because Star Wars is awesome"
      end

      def self.available_options
        [
          FastlaneCore::ConfigItem.new(key: :route,
                                        env_name: "FL_STAR_WARS_API_ROUTE",
                                        description: "The route to call on Star Wars API",
                                        required: true
                                        end)
        ]
      end

      def self.output
        [
          ['STAR_WARS_API_LAST_RESPONSE', 'Last resopnse because why not']
        ]
      end

      def self.return_value
        "Hash with person info"
      end

      def self.authors
        ["joshdholtz"]
      end

      def self.is_supported?(platform)
        [:ios, :android, :mac].include?(platform)
      end
    end
  end
end</code></pre>
          </div>
        </section>

        <section class="bg-apple slide-center">
          <div class="wrap">
            <h1>9. Keep Lanes Simple - Custom Plugin cont'd</h1>
            <ul>
              <li>
                A plugin is 100% the same thing as an action but contained in its own repository
              </li>
              <li>
                It is created outside of a fastlane project with templated tests and a README
              </li>
              <li>
                More information can be found on the docs page on how to create - <a href="https://docs.fastlane.tools/plugins/create-plugin/" target="_blank">https://docs.fastlane.tools/plugins/create-plugin/</a>
              </li>
            </ul>
          </div>
        </section>

        <section class="bg-apple aligncenter">
            <h1 class="text-emoji zoomIn">ðŸ˜Ž</h1>
            <h3><strong>Thank you!</strong></h2>
            <h4><a href="https://twitter.com/joshdholtz" title="@WebSlides on Twitter">@joshdholtz</a></h4>
            <h5><a href="https://www.joshholtz.com/fastlane-best-practices/">www.joshholtz.com/fastlane-best-practices</a></h5>
            <h3>Q & A???</h3>
          </section>

      </article>
    </main>
    <!--main-->

    <!-- Required -->
    <script src="./static/js/prism.js"></script>
    <script src="./static/js/webslides.js"></script>

    <script>
      window.ws = new WebSlides();
    </script>

    <!-- OPTIONAL - svg-icons.js (fontastic.me - Font Awesome as svg icons) -->
    <script defer src="./static/js/svg-icons.js"></script>

  </body>
</html>
